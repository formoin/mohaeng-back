<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.user.model.mapper.UserMapper">
	<!-- 검색 -->
	<resultMap type="user" id="user">
		<result column="user_id" property="userId"/>
		<result column="user_name" property="userName"/>
		<result column="user_password" property="userPwd"/>
		<result column="user_phone" property="userPhone"/>
		<result column="birthday" property="birthday"/>
		<result column="message" property="message"/>
		<result column="img" property="img"/>
	</resultMap>

	<insert id="join" parameterType="user">
		insert into user
			(user_id, user_password, user_name, user_phone, birthday, message, img)
		values
			(#{userId}, #{userPwd}, #{userName}, #{userPhone}, #{birthday}, #{message}, #{img})
	</insert>

	<select id="findById" parameterType="string" resultMap="user">
		select id, user_id, user_password, user_name, user_phone, birthday, message, img
		from user
		where user_id=#{userId}
	</select>
	
	<update id="update" parameterType="user">
		update user
		set user_name=#{userName}, user_phone=#{userPhone}, birthday=#{birthday}, message=#{message}, img=#{img}
		where user_id=#{userId}
	</update>

	<update id="updatePwd" parameterType="user">
		update user
		set user_password=#{userPwd}
		where id=#{id}
	</update>
	
	<select id="selectByKeyword" parameterType="String" resultMap="user">
		select id, user_id, user_name
		from user
		where user_id like CONCAT('%',#{keyword},'%') or user_name like CONCAT('%',#{keyword},'%')
	</select>

	<delete id="deleteById" parameterType="int">
		delete from user
		where id=#{userId}
	</delete>
</mapper>